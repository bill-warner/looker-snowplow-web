<html>

<head>
    <title>E-commerce Event</title>

</head>

<script type="text/javascript">
    ;
    (function(p, l, o, w, i, n, g) {
        if (!p[i]) {
            p.GlobalSnowplowNamespace = p.GlobalSnowplowNamespace || [];
            p.GlobalSnowplowNamespace.push(i);
            p[i] = function() {
                (p[i].q = p[i].q || []).push(arguments)
            };
            p[i].q = p[i].q || [];
            n = l.createElement(o);
            g = l.getElementsByTagName(o)[0];
            n.async = 1;
            n.src = w;
            g.parentNode.insertBefore(n, g)
        }
    }(window, document, "script", "sp.js", "snowplow"));

    snowplow('newTracker', 'sp', 'com-snplow-eng-aws-prod1.mini.snplow.net', {
        appId: 'my-store'
    });
    snowplow('enableLinkClickTracking');
    snowplow('enableLinkClickTracking');            //track every link click
    snowplow('enableFormTracking');                 //track every form action
    snowplow('enableActivityTracking', {
      minimumVisitLength: 10,
      heartbeatDelay: 10
    }); 
    snowplow('trackPageView');
    
</script>

<body>

    <h1>Love Bonito - Demo</h1>
    <p><img src="/Users/rahulgodara/Documents/Mini/Practice/demo.png" style="width:750px;">
      <br>
    <h3>Snowplow QA tooling</h3>
    <p><a href="https://chrome.google.com/webstore/detail/snowplow-inspector/maplkdomeamdlngconidoefjpogkmljm?hl=en"
        id="inspector" target="_blank">1. Use the browser inspector to check if events were emitted correctly</a></p>
    <p><a href="https://github.com/snowplow/snowplow-mini/wiki/Usage-guide" id="mini" target="_blank">2. Use Snowplow
        Mini to check if events were validated and enriched correctly in Kibana</a></p>
    <p><a href="https://github.com/snowplow-incubator/snowplow-micro/tree/master" id="micro" target="_blank">3. Use
        Snowplow Micro to add to your automated testing suite</a></p>
    <br>

    <h3>Login</h3>
    <p>
    <form>
      First name:<br>
      <input type="text" name="firstname"><br>
      Last name:<br>
      <input type="text" name="lastname"><br>
      <input type="submit" value="Submit">
    </form>
    <br>

    <h3>Fill in this form</h3>
    <p>
    <form id="furniture">
      <input type="radio" name="Options" value="Option 1" checked>Option 1<br>
      <input type="radio" name="Options" value="Option 2">Option 2<br>
      <input type="radio" name="Options" value="Option 3">Option 3<br>
    </form>
    <p> <button onclick="order()" id="order_furniture">Done</button>
      <br>

      <h3>Become a lead</h3>
    <p>
    <form id="email">
      Email here:<br>
      <input type="text" name="email"><br>
    </form>

    <h3>E-commerce Activity</h3>
    <p>

    <button onclick="button()" type="button">Add Ecomm Transaction</button>
    <script>
        function button() 
        {
            snowplow('trackSelfDescribingEvent', {
            event: {                    // (aidan says:) added this 
                schema: "iglu:com.rahul/ecommtransaction/jsonschema/1-0-0",
                data: {
                    orderId: 1234,  // required      // (aidan says:) integer expected by jsonschema 
                    total: 1199,   // required       // (aidan says:) integer expected by jsonschema 
                    affiliation: 'Acme Clothing', 
                    tax: 129 ,       // (aidan says:) integer expected by jsonschema 
                    shipping: 5,
                    city: 'San Jose',
                    state: 'California',
                    country: 'USA',
                    currency: 'USD'
                }
            },
        })
             //snowplow('trackTrans');
        };

    </script>
<br>
    <button onclick="item()" type="button">Add Item</button>
        <script>
            function item() 
            {
                snowplow('addItem', {
                orderId: '1234', // required
                sku: 'DD44',     // required
                name: 'T-Shirt',      
                category: 'Green Medium',
                price: 11.99,
                quantity: 1,
                currency: 'USD'
            });
            snowplow('trackTrans');
        };
        </script>
     <br>

     <button onclick="trans()" type="button">Add Transaction</button>
     <script>
         function trans() 
         {
             snowplow('addTrans', {
                orderId: '1234',  // required
                total: 11.99,   // required
                affiliation: 'Acme Clothing', 
                tax: 1.29,
                shipping: 5,
                city: 'San Jose',
                state: 'California',
                country: 'USA',
                currency: 'USD'
         });
         snowplow('trackTrans');
     };
     </script>   
     
     <br>
    <h3>Cart Activity</h3>
    <p>

     <button onclick="addtocart()" type="button">Add to Cart</button>
     <script>
         function addtocart() 
         {
            snowplow('trackAddToCart', {
            sku: '000345', 
            name: 'blue tie', 
            category: 'clothing', 
            unitPrice: 3.49, 
            quantity: 2, 
            currency: 'GBP'
            });
     };
     </script>  
<br>
<button onclick="removecart()" type="button">Remove from Cart</button>
<script>
    function removecart() 
    {
       snowplow('trackRemoveFromCart', {
       sku: '000345', 
       name: 'blue tie', 
       category: 'clothing', 
       unitPrice: 3.49, 
       quantity: 2, 
       currency: 'GBP'
       });
};
</script> 
<p> <button onclick="lead()" id="lead_capture">Sign up for weekly newsletter</button>
    <script>
      function order() {
        snowplow('trackSelfDescribingEvent', {
          event: {
            schema: 'iglu:com.google.analytics.measurement-protocol/product_action/jsonschema/1-0-0',
            data: {
              productAction: "purchase"
            }
          }
        })
      };
      function lead() {
        snowplow('trackSelfDescribingEvent', {
          event: {
            schema: 'iglu:com.snowplowanalytics.snowplow/submit_form/jsonschema/1-0-0',
            data: {
              formId: document.getElementById("email").elements.email.value
            },
            context: [
              {
                schema: 'iglu:com.optimizely/state/jsonschema/1-0-0',
                data: {
                  experimentId: "lead_button",
                  variationId: "variant_a"
                }
              }
            ]
          }
        });
      }
    </script>
</body>
</html>